<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/>
      <!--<link rel="stylesheet" type="text/css" href="stylesheets/default.css">-->
      <!--<!--<link href="stylesheets/d.css" rel="stylesheet" type="text/css" />-->
      <!--<link href="stylesheets/fixes.css" rel="stylesheet" type="text/css" />-->
      <!--<link href="stylesheets/main.css" rel="stylesheet" type="text/css" />-->
      <!--<link href="stylesheets/reset.css" rel="stylesheet" type="text/css" />-->
      <!--<link href="stylesheets/print.css" rel="stylesheet" type="text/css" />-->
      <!--<link href="stylesheets/styles.css" rel="stylesheet" type="text/css" />-->
      <!--<link href="stylesheets/style.css" rel="stylesheet" type="text/css" />-->

     <style>
/* Site */
body {
      font-family: Verdana, Lucida Grande, Arial, Helvetica, sans-serif;
      font-size: 16px;
      line-height: 18px;
      padding-top: 10px;
      padding-bottom: 10px;
      background-color: white;
      padding: 30px;
      color: #333;
      border: 1px solid #aaa;
      max-width: 900px;
      margin: 20px auto;	
      background: #fff url(/images/topbluefade.gif) repeat-x center top;	
}

    body > *:first-child {
      margin-top: 0 !important;
    }

    body > *:last-child {
      margin-bottom: 0 !important;
    }

    a {
      color: #4183C4;
      text-decoration: none;
    }

    a.absent {
      color: #cc0000;
    }

    a.anchor {
      display: block;
      padding-left: 30px;
      margin-left: -30px;
      cursor: pointer;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
    }

    h1, h2, h3, h4, h5, h6 {
      margin: 20px 0 10px;
      padding: 0;
      font-weight: bold;
      -webkit-font-smoothing: antialiased;
      cursor: text;
      position: relative;
    }

    h2:first-child, h1:first-child, h1:first-child + h2, h3:first-child, h4:first-child, h5:first-child, h6:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
      text-decoration: none;
    }

    h1 tt, h1 code {
      font-size: inherit;
    }

    h2 tt, h2 code {
      font-size: inherit;
    }

    h3 tt, h3 code {
      font-size: inherit;
    }

    h4 tt, h4 code {
      font-size: inherit;
    }

    h5 tt, h5 code {
      font-size: inherit;
    }

    h6 tt, h6 code {
      font-size: inherit;
    }

    h1 {
      font-size: 28px;
      color: black;
    }

    h2 {
      font-size: 24px;
      border-bottom: 1px solid #cccccc;
      color: black;
    }

    h3 {
      font-size: 18px;
    }

    h4 {
      font-size: 16px;
    }

    h5 {
      font-size: 14px;
    }

    h6 {
      color: #777777;
      font-size: 14px;
    }

    p, blockquote, ul, ol, dl, li, table, pre {
      margin: 3px 0;
    }

    hr {
      background: transparent url("http://tinyurl.com/bq5kskr") repeat-x 0 0;
      border: 0 none;
      color: #cccccc;
      height: 4px;
      padding: 0;
    }

    body > h2:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    body > h1:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    body > h1:first-child + h2 {
      margin-top: 0;
      padding-top: 0;
    }

    body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
      margin-top: 0;
      padding-top: 0;
    }

    h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
      margin-top: 0;
    }

    li p.first {
      display: inline-block;
    }

    ul, ol {
      padding-left: 30px;
    }

    ul :first-child, ol :first-child {
      margin-top: 0;
    }

    ul :last-child, ol :last-child {
      margin-bottom: 0;
    }

    dl {
      padding: 0;
    }

    dl dt {
      font-size: 14px;
      font-weight: bold;
      font-style: italic;
      padding: 0;
      margin: 15px 0 5px;
    }

    dl dt:first-child {
      padding: 0;
    }

    dl dt > :first-child {
      margin-top: 0;
    }

    dl dt > :last-child {
      margin-bottom: 0;
    }

    dl dd {
      margin: 0 0 15px;
      padding: 0 15px;
    }

    dl dd > :first-child {
      margin-top: 0;
    }

    dl dd > :last-child {
      margin-bottom: 0;
    }

    blockquote {
      border-left: 4px solid #dddddd;
      padding: 0 15px;
      color: #777777;
    }

    blockquote > :first-child {
      margin-top: 0;
    }

    blockquote > :last-child {
      margin-bottom: 0;
    }

    table {
      padding: 0;
    }
    table tr {
      border-top: 1px solid #cccccc;
      background-color: white;
      margin: 0;
      padding: 0;
    }

    table tr:nth-child(2n) {
      background-color: #f8f8f8;
    }

    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px;
    }

    table tr td {
      border: 1px solid #cccccc;
      text-align: left;
      margin: 0;
      padding: 6px 13px;
    }

    table tr th :first-child, table tr td :first-child {
      margin-top: 0;
    }

    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0;
    }

    img {
      max-width: 100%;
    }

    span.frame {
      display: block;
      overflow: hidden;
    }

    span.frame > span {
      border: 1px solid #dddddd;
      display: block;
      float: left;
      overflow: hidden;
      margin: 13px 0 0;
      padding: 7px;
      width: auto;
    }

    span.frame span img {
      display: block;
      float: left;
    }

    span.frame span span {
      clear: both;
      color: #333333;
      display: block;
      padding: 5px 0 0;
    }

    span.align-center {
      display: block;
      overflow: hidden;
      clear: both;
    }

    span.align-center > span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: center;
    }

    span.align-center span img {
      margin: 0 auto;
      text-align: center;
    }

    span.align-right {
      display: block;
      overflow: hidden;
      clear: both;
    }

    span.align-right > span {
      display: block;
      overflow: hidden;
      margin: 13px 0 0;
      text-align: right;
    }

    span.align-right span img {
      margin: 0;
      text-align: right;
    }

    span.float-left {
      display: block;
      margin-right: 13px;
      overflow: hidden;
      float: left;
    }

    span.float-left span {
      margin: 13px 0 0;
    }

    span.float-right {
      display: block;
      margin-left: 13px;
      overflow: hidden;
      float: right;
    }

    span.float-right > span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: right;
    }

    code, tt {
      font-family: "Lucida Console", "Courier New", courier;
      font-size: 12px;
      margin: 0 2px;
      padding: 3px 5px;
      white-space: nowrap;
      border: 1px solid #eaeaea;
      background-color: #f8f8f8;
      border-radius: 3px;
    }

    pre code {
      margin: 0;
      padding: 0;
      white-space: pre;
      border: none;
      background: transparent;
    }

    .highlight pre {
      background-color: #f8f8f8;
      border: 1px solid #cccccc;
      font-size: 13px;
      line-height: 19px;
      overflow: auto;
      padding: 6px 10px;
      border-radius: 3px;
    }

    pre {
      background-color: #f8f8f8;
      border: 1px solid #cccccc;
      font-size: 13px;
      line-height: 19px;
      overflow: auto;
      padding: 6px 10px;
      border-radius: 3px;
    }

    pre code, pre tt {
      background-color: transparent;
      border: none;
    }

    span.line-numbers {
      margin-right: 10px;
    }

    img.logo {
      display: block;
      margin: 10px auto;
    }

    h1.logo {
      text-align: center;
      font-size: 40px;
    }
a img {
	border: none;
}
a.nohover {
	background-color: transparent !important;
}
a.align-right {
	float: right;
	margin: 0px 0px 0px 10px;
}
a.align-right img {
	display: block;
}
a.align-center {
	display: inline-block;
	margin: 0px 5px;
}
a.align-center img {
	display: block;
}
img.bordered {
	background-color: #fff;
	border: 1px solid #CCC;
	padding: 1px;
}
img.align-right {
	float: right;
	margin: 0px 0px 0px 10px;
}
span.highlight {
	background-color: #ffc;
}
div.section {
	margin: 0px auto;
	overflow: hidden;
	width: 700px;
}
div.section h2 {
	color: #000;
	float: left;
	font-family: Georgia;
	font-size: 28px;
	font-weight: normal;
	line-height: 120%;
	margin: 0px 0px 20px 0px;
	text-align: right;
	width: 200px;
}
div.section h3 {
	color: #900;
	font-family: Georgia;
	font-size: 18px;
	margin: 0px 0px 0px 250px;
	line-height: 140%;
}
div.section h3.pull-left {
	font-size: 20px;
	font-weight: normal;
	line-height: 120%;
	color: #900;
	float: left;
	margin: 0px 0px 10px 0px;
	width: 200px;
	text-align: right;
}
div.section p {
	font-family: Georgia;
	font-size: 18px;
	line-height: 140%;
	margin: 0px 0px 25px 250px;
	width: 450px;
}
div.section h2.small {
	font-size: 20px;
}
div.section p.small {
	font-size: 14px;
}
div.section blockquote {
	margin: 0px 0px 25px 250px;
	width: 450px;
}
div.section blockquote p {
	font-family: Courier New, Courier, mono;
	font-size: 16px;
	font-weight: bold;
	line-height: 140%;
	margin: 0px 25px;
	width: auto;
}
div.section p.more {
	font-size: 12px;
	text-align: center;
}
div.section p.centered {
	text-align: center;
}
div.section p.download,
div.section p.credit {
	font-size: 14px;
}
div.section p.footnote,
div.section p.sponsorship {
	font-size: 12px;
}
div.section img.biopic {
	background-color: #fff;
	border: 2px solid #ccc;
	padding: 2px;
	float: left;
	margin: 0px 0px 10px 40px;
}
div.section a.screencast {
	background-color: transparent !important;
	float: left;
	clear: left;
	margin: 0px 0px 25px 25px;
}
div.section a.screencast img {
	display: block;
	background-color: #fff;
	border: 2px solid #ccc;
	padding: 2px;
}
div.section ul.grid {
	list-style: none;
	margin: 0px 0px 15px 280px;
	padding: 0px;
	overflow: hidden;
	width: 420px;
}
div.section ul.grid li {
	float: left;
	margin: 0px 0px 0px 0px;
	height: 160px;
	width: 200px;
}
div.section ul.grid li a {
	background-color: transparent !important;
	display: block;
	margin: 0px 0px 5px 0px;
}
div.section ul.grid li img {
	display: block;
	border: 1px solid #ccc;
	padding: 1px;
}
div.section ul.grid li p {
	font-size: 10px;
	font-family: inherit;
	margin: 0px;
	width: auto;
}
div.section ul.grid li p a {
	display: inline;
}
div.section ul.grid li p a:hover {
	background-color: #f4dda6 !important;
}
div.section div.video {
	margin: 0px 0px 25px 250px;
	width: 450px;
}
div.section ul.links {
	list-style: none;
	float: left;
	clear: left;
	text-align: right;
	width: 200px;
	padding: 0px;
	margin: 0px 0px 20px 0px;
	font-family: Georgia;
	font-size: 14px;
	line-height: 140%;
	overflow: hidden;
}
div.section ul.links li {
	float: right;
	clear: right;
}
div.section ul.links li.rss {
	background: url(/images/rss.png) no-repeat 0px 1px;
	padding: 0px 0px 0px 22px;
}
div.section code {
	font-family: Courier New, Courier, mono;
	font-size: 16px;
	font-weight: bold;
}
#navigation {
	width: 726px;
	margin: 15px auto 10px;
	font-size: 10px;
	line-height: 12px;
	text-align: center;
}
#navigation a {
	color: #000;
	font-weight: bold;
	font-size: 11px;
	text-decoration: underline;
}
#navigation a:hover {
	background-color: #000;
	color: #fff;
	text-decoration: none;
}
#article {
	padding: 0px 0px 20px 0px;
}
#article header {
	background: url(/images/rails.png) no-repeat left top;
	margin: 50px auto 32px;
	width: 606px;
	padding-left: 100px;
	text-align: center;
}
#article header h1 {
	margin: 0 auto 12px;
  font-family: "expressway",sans-serif;
  font-style: normal;
  font-weight: 700;
	font-size: 38px;
  line-height: 30px;
  color: #000000;
}
#article header h2 {
	margin: 0 auto;
  font-family: "expressway",sans-serif;
  font-style: normal;
  font-weight: 400;
	font-size: 21px;
	line-height: 24px;
	color: #999999;
}
#article p a,
#article ol a,
#article ul a {
	color: #369;
}
#article p a:hover,
#article ol a:hover,
#article ul a:hover {
	background-color: #f4dda6;
	text-decoration: none;
}
#article hr.rule {
	border: 0px;
	color: #bbb;
	background-color: #bbb;
	height: 1px;
	width: 670px;
	margin: 0px auto 25px;
}
#article p.missing {
	color: #000;
	font-family: Georgia;
	font-size: 28px;
	font-weight: normal;
	line-height: 120%;
	margin: 0px auto;
	text-align: center;
	width: 700px;
}
#footer {
	color: #666;
	font-size: 11px;
	margin: 0px auto;
	padding: 0px 0px 44px 0px;
	text-align: center;
	width: 726px;
}
#footer p {
	margin: 12px 0px;
}
#footer p a {
	color: #000;
}
#footer p a:hover {
	background-color: #333;
	color: #fff;
	text-decoration: none;
}
#sponsored_by {
	margin: 17px 0px !important;
}
#sponsored_by a:hover {
	background-color: transparent !important;
}
#sponsored_by a img {
	vertical-align: -7px;
}

/* Overview */
#announce {
	background-color: #981a21;
	color: #fff;
	font-size: 11px;
	line-height: 13px;
	margin: 0px;
	padding: 5px 0px;
	text-align: center;
}
#announce a {
	color: #fff !important;
	text-decoration: underline;
}
#announce a:hover {
	background-color: #000 !important;
	text-decoration: none;
}
#slivers {
	background: url(/images/herobackground.gif) repeat-x left top;
	border-top: 2px solid #F6E69F;
	border-bottom: 2px solid #F6E69F;
	padding: 10px;
}
#slivers ul {
	list-style: none;
	margin: 0px auto;
	padding: 0px;
	overflow: hidden;
	width: 792px;
}
#slivers ul li {
	float: left;
	margin: 0px 24px;
	width: 150px;
}
#slivers ul li h2 {
	color: #0e3062;
	font-family: Georgia;
	font-size: 22px;
	line-height: 24px;
	font-weight: normal;
	margin: 0px 0px 10px 0px;
	text-align: center;
}
#slivers ul li img {
	display: block;
	margin: 0px auto 5px;
}
#slivers ul li p {
	margin: 0px;
	text-align: center;
}
#slivers ul li p a {
	color: #000;
	font-size: 10px;
}
#slivers ul li p a:hover {
	background-color: #000;
	color: #fff;
	text-decoration: none;
}

#slideshow {
	font-family: Georgia;
	font-size: 16px;
	height: 132px;
	line-height: 140%;
	margin: 0px auto 30px;
	text-align: center;
	width: 700px;
	padding: 30px 0px 0px 0px;
	position: relative;
}
#slideshow blockquote {
	margin: 0px;
	position: absolute;
	width: 700px;
}
#slideshow blockquote p {
	margin: 0px;
}
#slideshow blockquote p cite {
	font-size: 14px;
	color: #464242;
}
#slideshow p.more {
	font-size: 14px;
	font-style: italic;
	margin: 0px;
	position: absolute;
	bottom: 0px;
	width: 700px;
}
#slideshow p.more a {
	color: #464242;
}
#slideshow p.more a:hover {
	background-color: #000;
	text-decoration: none;
}
#used_by ul {
	list-style: none;
	margin: 0px 0px 0px 280px;
	padding: 0px;
	overflow: hidden;
}
#used_by ul li {
	float: left;
	margin: 0px 0px 20px 0px;
	width: 209px;
}
#used_by ul li img {
	display: block;
	margin: 0px 0px 5px 0px;
}
#used_by ul li p {
	font-size: 10px;
	font-family: inherit;
	margin: 0px;
	width: auto;
}
/* Applications */
#applications {
	list-style: none;
	margin: 0px auto;
	padding: 0px 0px 0px 110px;
	overflow: hidden;
	width: 700px;
}
#applications li {
	float: left;
	width: 200px;
	margin: 0px 0px 20px 0px;
}
#applications li a {
	display: block;
	margin: 0px 0px 5px 0px;
	background-color: transparent !important;
}
#applications li a img {
	background-color: #fff;
	border: 1px solid #CCC;
	padding: 1px;
	display: block;
}
#applications li p {
	font-size: 10px;
	margin: 0px;
}
#applications li p a {
	display: inline;
}
#applications li p a:hover {
	background-color: #f4dda6 !important;
}
/* Quotes */
#article.quotes blockquote {
	font-family: Georgia;
	font-size: 18px;
	line-height: 140%;
	margin: 0px auto 25px;
	text-align: center;
	width: 700px;
	padding: 0px;
	position: relative;
}
#article.quotes blockquote p {
	margin: 0px;
}
#article.quotes blockquote p cite {
	font-size: 14px;
	color: #a69e8a;
}
/* Security Policy */
#article.security {
	margin: 50px auto 30px;
	width: 700px;
}
#article.security h2 {
	font-weight: bold;
	text-transform: uppercase;
	font-size: 20px;
	font-family: Arial, Helvetica, sans-serif;
	text-align: center;
	margin: 40px 0px 15px 0px;
}
#article.security h3 {
	color: #900;
	font-family: Georgia;
	font-size: 18px;
	margin: 0;
	line-height: 140%;
}
#article.security p,
#article.security ol {
	font-family: Georgia;
	font-size: 18px;
	line-height: 140%;
	margin: 0px 0px 25px 0px;
}
#article.security ol li {
	margin: 0px 0px 10px 0px;
}

     </style>
  </head>
  <body>
    <div id="containter">          
      <h1 id="you-dont-know-js-types--grammar">You Don’t Know JS: Types &amp; Grammar</h1>
<p># Chapter 1: Types</p>

<p>Most developers would say that a dynamic language (like JS) does not have <em>types</em>. Let’s see what the ES5.1 specification (http://www.ecma-international.org/ecma-262/5.1/) has to say on the topic:</p>

<blockquote>
  <p>Algorithms within this specification manipulate values each of which has an associated type. The possible value types are exactly those defined in this clause. Types are further sub classified into ECMAScript language types and specification types.</p>

  <p>An ECMAScript language type corresponds to values that are directly manipulated by an ECMAScript programmer using the ECMAScript language. The ECMAScript language types are Undefined, Null, Boolean, String, Number, and Object.</p>
</blockquote>

<p>Now, if you’re a fan of strongly typed (statically typed) languages, you may object to this usage of the word “type.” In those languages, “type” means a whole lot <em>more</em> than it does here in JS.</p>

<p>Some people say JS shouldn’t claim to have “types,” and they should instead be called “tags” or perhaps “subtypes”.</p>

<p>Bah! We’re going to use this rough definition (the same one that seems to drive the wording of the spec): a <em>type</em> is an intrinsic, built-in set of characteristics that uniquely identifies the behavior of a particular value and distinguishes it from other values, both to the engine <strong>and to the developer</strong>.</p>

<p>In other words, if both the engine and the developer treat value <code>42</code> (the number) differently than they treat value <code>"42"</code> (the string), then those two values have different <em>types</em> – <code>number</code> and <code>string</code>, respectively. When you use <code>42</code>, you are <em>intending</em> to do something numeric, like math. But when you use <code>"42"</code>, you are <em>intending</em> to do something string’ish, like outputting to the page, etc. <strong>These two values have different types.</strong></p>

<p>That’s by no means a perfect definition. But it’s good enough for this discussion. And it’s consistent with how JS describes itself.</p>

<h1 id="a-type-by-any-other-name">A Type By Any Other Name…</h1>

<p>Beyond academic definition disagreements, why does it matter if JavaScript has <em>types</em> or not?</p>

<p>Having a proper understanding of each <em>type</em> and its intrinsic behavior is absolutely essential to understanding how to properly and accurately convert values to different types (see Coercion, Chapter 4). Nearly every JS program ever written will need to handle value coercion in some shape or form, so it’s important you do so responsibly and with confidence.</p>

<p>If you have the <code>number</code> value <code>42</code>, but you want to treat it like a <code>string</code>, such as pulling out the <code>"2"</code> as a character in position <code>1</code>, you obviously must first convert (coerce) the value from <code>number</code> to <code>string</code>.</p>

<p>That seems simple enough.</p>

<p>But there are many different ways that such coercion can happen. Some of these ways are explicit, easy to reason about, and reliable. But if you’re not careful, coercion can happen in very strange and surprising ways.</p>

<p>Coercion confusion is perhaps one of the most profound frustrations for JavaScript developers. It has often been criticized as being so <em>dangerous</em> as to be considered a flaw in the design of the language, to be shunned and avoided.</p>

<p>Armed with a full understanding of JavaScript types, we’re aiming to illustrate why coercion’s <em>bad reputation</em> is largely overhyped and somewhat undeserved – to flip your perspective, to seeing coercion’s power and usefulness. But first, we have to get a much better grip on values and types.</p>

<h2 id="built-in-types">Built-in Types</h2>

<p>JavaScript defines seven built-in types:</p>

<ul>
  <li><code>null</code></li>
  <li><code>undefined</code></li>
  <li><code>boolean</code></li>
  <li><code>number</code></li>
  <li><code>string</code></li>
  <li><code>object</code></li>
  <li><code>symbol</code> – added in ES6!</li>
</ul>

<p><strong>Note:</strong> All of these types except <code>object</code> are called “primitives”.</p>

<p>The <code>typeof</code> operator inspects the type of the given value, and always returns one of seven string values – surprisingly, there’s not an exact 1-to-1 match with the seven built-in types we just listed.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">typeof</span> <span style="color:#069">undefined</span>     === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">undefined</span><span style="color:#710">&quot;</span></span>; <span style="color:#777">// true</span>
<span style="color:#080;font-weight:bold">typeof</span> <span style="color:#069">true</span>          === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">boolean</span><span style="color:#710">&quot;</span></span>;   <span style="color:#777">// true</span>
<span style="color:#080;font-weight:bold">typeof</span> <span style="color:#00D">42</span>            === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">number</span><span style="color:#710">&quot;</span></span>;    <span style="color:#777">// true</span>
<span style="color:#080;font-weight:bold">typeof</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">42</span><span style="color:#710">&quot;</span></span>          === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">string</span><span style="color:#710">&quot;</span></span>;    <span style="color:#777">// true</span>
<span style="color:#080;font-weight:bold">typeof</span> { <span style="color:#606">life</span>: <span style="color:#00D">42</span> }  === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">object</span><span style="color:#710">&quot;</span></span>;    <span style="color:#777">// true</span>

<span style="color:#777">// added in ES6!</span>
<span style="color:#080;font-weight:bold">typeof</span> Symbol()      === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">symbol</span><span style="color:#710">&quot;</span></span>;    <span style="color:#777">// true</span>
</pre></div>
</div>
</div>

<p>These six listed types have values of the corresponding type and return a string value of the same name, as shown. <code>Symbol</code> is a new data type as of ES6, and will be covered in Chapter 3.</p>

<p>As you may have noticed, I excluded <code>null</code> from the above listing. It’s <em>special</em> – special in the sense that it’s buggy when combined with the <code>typeof</code> operator:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">typeof</span> <span style="color:#069">null</span> === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">object</span><span style="color:#710">&quot;</span></span>; <span style="color:#777">// true</span>
</pre></div>
</div>
</div>

<p>It would have been nice (and correct!) if it returned <code>"null"</code>, but this original bug in JS has persisted for nearly two decades, and will likely never be fixed because there’s too much existing web content that relies on its buggy behavior that “fixing” the bug would <em>create</em> more “bugs” and break a lot of web software.</p>

<p>If you want to test for a <code>null</code> value using its type, you need a compound condition:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">var</span> a = <span style="color:#069">null</span>;

(!a &amp;&amp; <span style="color:#080;font-weight:bold">typeof</span> a === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">object</span><span style="color:#710">&quot;</span></span>); <span style="color:#777">// true</span>
</pre></div>
</div>
</div>

<p><code>null</code> is the only primitive value that is “falsy” (aka false-like; see Chapter 4) but that also returns <code>"object"</code> from the <code>typeof</code> check.</p>

<p>So what’s the seventh string value that <code>typeof</code> can return?</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">typeof</span> <span style="color:#080;font-weight:bold">function</span> <span style="color:#06B;font-weight:bold">a</span>(){ <span style="color:#777">/* .. */</span> } === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">function</span><span style="color:#710">&quot;</span></span>; <span style="color:#777">// true</span>
</pre></div>
</div>
</div>

<p>It’s easy to think that <code>function</code> would be a top-level built-in type in JS, especially given this behavior of the <code>typeof</code> operator. However, if you read the spec, you’ll see it’s actually a “subtype” of object. Specifically, a function is referred to as a “callable object” – an object that has an internal <code>[[Call]]</code> property that allows it to be invoked.</p>

<p>The fact that functions are actually objects is quite useful. Most importantly, they can have properties. For example:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">function</span> <span style="color:#06B;font-weight:bold">a</span>(b,c) {
        <span style="color:#777">/* .. */</span>
}
</pre></div>
</div>
</div>

<p>The function object has a <code>length</code> property set to the number of formal parameters it is declared with.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>a.length; <span style="color:#777">// 2</span>
</pre></div>
</div>
</div>

<p>Since you declared the function with two formal named parameters (<code>b</code> and <code>c</code>), the “length of the function” is <code>2</code>.</p>

<p>What about arrays? They’re native to JS, so are they a special type?</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">typeof</span> [<span style="color:#00D">1</span>,<span style="color:#00D">2</span>,<span style="color:#00D">3</span>] === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">object</span><span style="color:#710">&quot;</span></span>; <span style="color:#777">// true</span>
</pre></div>
</div>
</div>

<p>Nope, just objects. It’s most appropriate to think of them also as a “subtype” of object (see Chapter 3), in this case with the additional characteristics of being numerically indexed (as opposed to just being string-keyed like plain objects) and maintaining an automatically updated <code>.length</code> property.</p>

<h2 id="values-as-types">Values as Types</h2>

<p>In JavaScript, variables don’t have types – <strong>values have types</strong>. Variables can hold any value, at any time.</p>

<p>Another way to think about JS types is that JS doesn’t have “type enforcement,” in that the engine doesn’t insist that a <em>variable</em> always holds values of the <em>same initial type</em> that it starts out with. A variable can, in one assignment statement, hold a <code>string</code>, and in the next hold a <code>number</code>, and so on.</p>

<p>The <em>value</em> <code>42</code> has an intrinsic type of <code>number</code>, and its <em>type</em> cannot be changed. Another value, like <code>"42"</code> with the <code>string</code> type, can be created <em>from</em> the <code>number</code> value <code>42</code> through a process called <strong>coercion</strong> (see Chapter 4).</p>

<p>If you use <code>typeof</code> against a variable, it’s not asking “what’s the type of the variable?” as it may seem, since JS variables have no types. Instead, it’s asking “what’s the type of the value <em>in</em> the variable?”</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">var</span> a = <span style="color:#00D">42</span>;
<span style="color:#080;font-weight:bold">typeof</span> a; <span style="color:#777">// &quot;number&quot;</span>

a = <span style="color:#069">true</span>;
<span style="color:#080;font-weight:bold">typeof</span> a; <span style="color:#777">// &quot;boolean&quot;</span>
</pre></div>
</div>
</div>

<p>The <code>typeof</code> operator always returns a string. So:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">typeof</span> <span style="color:#080;font-weight:bold">typeof</span> <span style="color:#00D">42</span>; <span style="color:#777">// &quot;string&quot;</span>
</pre></div>
</div>
</div>

<p>The first <code>typeof 42</code> returns <code>"number"</code>, and <code>typeof "number"</code> is <code>"string"</code>.</p>

<h3 id="undefined-vs-undeclared"><code>undefined</code> vs “undeclared”</h3>

<p>Variables that have no value <em>currently</em>, actually have the <code>undefined</code> value. Calling <code>typeof</code> against such variables will return <code>"undefined"</code>:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">var</span> a;

<span style="color:#080;font-weight:bold">typeof</span> a; <span style="color:#777">// &quot;undefined&quot;</span>

<span style="color:#080;font-weight:bold">var</span> b = <span style="color:#00D">42</span>;
<span style="color:#080;font-weight:bold">var</span> c;

<span style="color:#777">// later</span>
b = c;

<span style="color:#080;font-weight:bold">typeof</span> b; <span style="color:#777">// &quot;undefined&quot;</span>
<span style="color:#080;font-weight:bold">typeof</span> c; <span style="color:#777">// &quot;undefined&quot;</span>
</pre></div>
</div>
</div>

<p>It’s tempting for most developers to think of the word “undefined” and think of it as a synonym for “undeclared.” However, in JS, these two concepts are quite different.</p>

<p>An “undefined” variable is one that has been declared in the accessible scope, but <em>at the moment</em> has no other value in it. By contrast, an “undeclared” variable is one that has not been formally declared in the accessible scope.</p>

<p>Consider:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">var</span> a;

a; <span style="color:#777">// undefined</span>
b; <span style="color:#777">// ReferenceError: b is not defined</span>
</pre></div>
</div>
</div>

<p>An annoying confusion is the error message that browsers assign to this condition. As you can see, the message is “b is not defined,” which is of course very easy and reasonable to confuse with “b is undefined.” Yet again, “undefined” and “is not defined” are very different things. It’d be nice if the browsers said something like “b is not found” or “b is not declared,” to reduce the confusion!</p>

<p>There’s also a special behavior associated with <code>typeof</code> as it relates to undeclared variables that even further reinforces the confusion. Consider:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">var</span> a;

<span style="color:#080;font-weight:bold">typeof</span> a; <span style="color:#777">// &quot;undefined&quot;</span>

<span style="color:#080;font-weight:bold">typeof</span> b; <span style="color:#777">// &quot;undefined&quot;</span>
</pre></div>
</div>
</div>

<p>The <code>typeof</code> operator returns <code>"undefined"</code> even for “undeclared” (or “not defined”) variables. Notice that there was no error thrown when we executed <code>typeof b</code>, even though <code>b</code> is an undeclared variable. This is a special safety guard in the behavior of <code>typeof</code>.</p>

<p>Similar to above, it would have been nice if <code>typeof</code> used with an undeclared variable returned “undeclared” instead of conflating the result value with the different “undefined” case.</p>

<h3 id="typeof-undeclared"><code>typeof</code> Undeclared</h3>

<p>Nevertheless, this safety guard is a useful feature when dealing with JavaScript in the browser, where multiple script files can load variables into the shared global namespace.</p>

<p><strong>Note:</strong> Many developers believe there should never be any variables in the global namespace, and that everything should be contained in modules and private/separate namespaces. This is great in theory but nearly impossible in practicality; still it’s a good goal to strive toward! Fortunately, ES6 added first-class support for modules, which will eventually make that much more practical.</p>

<p>As a simple example, imagine having a “debug mode” in your program that is controlled by a global variable (flag) called <code>DEBUG</code>. You’d want to check if that variable was declared before performing a debug task like logging a message to the console. A top-level global <code>var DEBUG = true</code> declaration would only be included in a “debug.js” file, which you only load into the browser when you’re in development/testing, but not in production.</p>

<p>However, you have to take care in how you check for the global <code>DEBUG</code> variable in the rest of your application code, so that you don’t throw a <code>ReferenceError</code>. The safety guard on <code>typeof</code> is our friend in this case.</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#777">// oops, this would throw an error!</span>
<span style="color:#080;font-weight:bold">if</span> (DEBUG) {
        console.log( <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Debugging is starting</span><span style="color:#710">&quot;</span></span> );
}

<span style="color:#777">// this is a safe existence check</span>
<span style="color:#080;font-weight:bold">if</span> (<span style="color:#080;font-weight:bold">typeof</span> DEBUG !== <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">undefined</span><span style="color:#710">&quot;</span></span>) {
        console.log( <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Debugging is starting</span><span style="color:#710">&quot;</span></span> );
}
</pre></div>
</div>
</div>

<p>This sort of check is useful even if you’re not dealing with user-defined variables (like <code>DEBUG</code>). If you are doing a feature check for a built-in API, you may also find it helpful to check without throwing an error:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">if</span> (<span style="color:#080;font-weight:bold">typeof</span> atob === <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">undefined</span><span style="color:#710">&quot;</span></span>) {
        <span style="color:#06B;font-weight:bold">atob</span> = <span style="color:#080;font-weight:bold">function</span>() { <span style="color:#777">/*..*/</span> };
}
</pre></div>
</div>
</div>

<p><strong>Note:</strong> If you’re defining a “polyfill” for a feature if it doesn’t already exist, you probably want to avoid using <code>var</code> to make the <code>atob</code> declaration. If you declare <code>var atob</code> inside the <code>if</code> statement, this declaration is hoisted (see the <em>Scope &amp; Closures</em> title of this series) to the top of the scope, even if the <code>if</code> condition doesn’t pass (because the global <code>atob</code> already exists!). In some browsers and for some special types of global built-in variables (often called “host objects”), this duplicate declaration may throw an error. Omitting the <code>var</code> prevents this hoisted declaration.</p>

<p>Another way of doing these checks against global variables but without the safety guard feature of <code>typeof</code> is to observe that all global variables are also properties of the global object, which in the browser is basically the <code>window</code> object. So, the above checks could have been done (quite safely) as:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">if</span> (window.DEBUG) {
        <span style="color:#777">// ..</span>
}

<span style="color:#080;font-weight:bold">if</span> (!window.atob) {
        <span style="color:#777">// ..</span>
}
</pre></div>
</div>
</div>

<p>Unlike referencing undeclared variables, there is no <code>ReferenceError</code> thrown if you try to access an object property (even on the global <code>window</code> object) that doesn’t exist.</p>

<p>On the other hand, manually referencing the global variable with a <code>window</code> reference is something some developers prefer to avoid, especially if your code needs to run in multiple JS environments (not just browsers, but server-side node.js, for instance), where the global variable may not always be called <code>window</code>.</p>

<p>Technically, this safety guard on <code>typeof</code> is useful even if you’re not using global variables, though these circumstances are less common, and some developers may find this design approach less desirable. Imagine a utility function that you want others to copy-and-paste into their programs or modules, in which you want to check to see if the including program has defined a certain variable (so that you can use it) or not:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">function</span> <span style="color:#06B;font-weight:bold">doSomethingCool</span>() {
        <span style="color:#080;font-weight:bold">var</span> helper =
                (<span style="color:#080;font-weight:bold">typeof</span> FeatureXYZ !== <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">undefined</span><span style="color:#710">&quot;</span></span>) ?
                <span style="color:#06B;font-weight:bold">FeatureXYZ</span> :
                <span style="color:#080;font-weight:bold">function</span>() { <span style="color:#777">/*.. default feature ..*/</span> };

        <span style="color:#080;font-weight:bold">var</span> val = helper();
        <span style="color:#777">// ..</span>
}
</pre></div>
</div>
</div>

<p><code>doSomethingCool()</code> tests for a variable called <code>FeatureXYZ</code>, and if found, uses it, but if not, uses its own. Now, if someone includes this utility into their module/program, it safely checks if they’ve defined <code>FeatureXYZ</code> or not:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#777">// an IIFE (see &quot;Immediately Invoked Function Expressions&quot;</span>
<span style="color:#777">// discussion in the *Scope &amp; Closures* title of this series)</span>
(<span style="color:#080;font-weight:bold">function</span>(){
        <span style="color:#080;font-weight:bold">function</span> <span style="color:#06B;font-weight:bold">FeatureXYZ</span>() { <span style="color:#777">/*.. my XYZ feature ..*/</span> }

        <span style="color:#777">// include `doSomethingCool(..)`</span>
        <span style="color:#080;font-weight:bold">function</span> <span style="color:#06B;font-weight:bold">doSomethingCool</span>() {
                <span style="color:#080;font-weight:bold">var</span> helper =
                        (<span style="color:#080;font-weight:bold">typeof</span> FeatureXYZ !== <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">undefined</span><span style="color:#710">&quot;</span></span>) ?
                        <span style="color:#06B;font-weight:bold">FeatureXYZ</span> :
                        <span style="color:#080;font-weight:bold">function</span>() { <span style="color:#777">/*.. default feature ..*/</span> };

                <span style="color:#080;font-weight:bold">var</span> val = helper();
                <span style="color:#777">// ..</span>
        }

        doSomethingCool();
})();
</pre></div>
</div>
</div>

<p>Here, <code>FeatureXYZ</code> is not at all a global variable, but we’re still using the safety guard of <code>typeof</code> to make it safe to check for. And importantly, here there is <em>no</em> object we can use (like we did for global variables with <code>window.___</code>) to make the check, so <code>typeof</code> is quite helpful.</p>

<p>Other developers would prefer a design pattern called “dependency injection,” where instead of <code>doSomethingCool()</code> inspecting implicitly for <code>FeatureXYZ</code> to be defined outside/around it, it would need to have the dependency explicitly passed in, like:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">function</span> <span style="color:#06B;font-weight:bold">doSomethingCool</span>(FeatureXYZ) {
        <span style="color:#080;font-weight:bold">var</span> helper = FeatureXYZ ||
                <span style="color:#080;font-weight:bold">function</span>() { <span style="color:#777">/*.. default feature ..*/</span> };

        <span style="color:#080;font-weight:bold">var</span> val = helper();
        <span style="color:#777">// ..</span>
}
</pre></div>
</div>
</div>

<p>There’s lots of options when designing such functionality. No one pattern here is “correct” or “wrong” – there are various tradeoffs to each approach. But overall, it’s nice that the <code>typeof</code> undeclared safety guard gives us more options.</p>

<h2 id="review">Review</h2>

<p>JavaScript has seven built-in <em>types</em>: <code>null</code>, <code>undefined</code>,  <code>boolean</code>, <code>number</code>, <code>string</code>, <code>object</code>, <code>symbol</code>. They can be identified by the <code>typeof</code> operator.</p>

<p>Variables don’t have types, but the values in them do. These types define intrinsic behavior of the values.</p>

<p>Many developers will assume “undefined” and “undeclared” are roughly the same thing, but in JavaScript, they’re quite different. <code>undefined</code> is a value that a declared variable can hold. “Undeclared” means a variable has never been declared.</p>

<p>JavaScript unfortunately kind of conflates these two terms, not only in its error messages (“ReferenceError: a is not defined”) but also in the return values of <code>typeof</code>, which is <code>"undefined"</code> for both cases.</p>

<p>However, the safety guard (preventing an error) on <code>typeof</code> when used against an undeclared variable can be helpful in certain cases.</p>

    </div>
  </body>
</html>
